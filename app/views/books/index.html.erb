<div class="header-section">
  <h1>ðŸ“š Book Catalog</h1>
</div>

<div class="card">
  <%= form_with url: books_path, method: :get, local: true, class: "filter-form" do |f| %>
    <div class="filter-row">
      <%= f.text_field :search,
          placeholder: "Search books by title or ISBN...",
          value: params[:search],
          class: "filter-input search-main" %>

      <%= f.select :category_id,
          options_from_collection_for_select(Category.all, :id, :name, params[:category_id]),
          { prompt: "All Categories" },
          { class: "filter-input" } %>

      <%= f.select :available,
          options_for_select([["All Books", ""], ["Available Only", "true"]], params[:available]),
          {},
          { class: "filter-input" } %>

      <%= f.submit "Search", class: "btn btn-primary" %>
      <%= link_to "Clear", books_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>


  <%= link_to "âž• Add New Book", new_book_path, class: "btn btn-success mb-20" %>


<div class="grid">
  <% @books.each do |book| %>
    <div class="card">
      <h3><%= link_to book.title, book %></h3>
      <p><strong>Authors:</strong> <%= book.authors.map(&:name).join(", ") %></p>
      <p><strong>ISBN:</strong> <%= book.isbn || "N/A" %></p>
      <p>
        <% if book.available? %>
          <span class="badge badge-success">Available (<%= book.available_copies %>)</span>
        <% else %>
          <span class="badge badge-danger">Unavailable</span>
        <% end %>
      </p>
      <% if book.average_rating %>
        <p class="star-rating">
          <%= "â­" * book.average_rating.round %>
          (<%= book.average_rating.round(1) %>/5)
        </p>
      <% end %>
      <%= link_to "View Details", book, class: "btn mt-10" %>
    </div>
  <% end %>
</div>

<div class="pagination-container">
  <%= paginate @books %>
</div>
<% if @books.empty? %>
  <div class="card">
    <p>No books found. Try adjusting your search criteria.</p>
  </div>
<% end %>